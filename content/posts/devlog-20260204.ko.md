+++
date = '2026-02-04T19:53:21+09:00'
draft = false
title = 'Devlog 20260204'
+++

## john-ahn-node-basic

Node.js 기반의 웹 서비스 보일러플레이트 제작기
([Repository](https://github.com/scorbiclife/john-ahn-node-basic))

### 로그인, 로그아웃 기능 구현

많은 것은 아니지만 로그인 및 로그아웃 기능을 구현하였다.
구현하는 과정에서 몇 가지 사항들에 대해서 고민하였다.

#### 한 사용자 당 여러 세션을 허용할 것인지?

당연히 여러 기기에서 동시에 로그인할 수 있으면 좋을 것이다.
그러나 강의에서 사용자 테이블에 토큰 컬럼에 최근에 연결된 세션 토큰을 저장하는 식으로
구현을 해서 강의를 충실하게 따라갈지 여러 세션 연결을 허용하는 설계 변경을 따를지 고민이었다.
결과적으로는 주기적인 토큰 폐기, 최대 세션 개수, 데이터베이스 마이그레이션 등 알 수 없는
변수들로 인해 얼마만큼의 시간이 소요될지 몰라, 다음 프로젝트 진행 시 설계 단계에서 고민해보기로 하고
현재는 계정 하나 당 한 세션만 연결하는 식으로 진행을 하였다.

#### 로그아웃은 어떻게 구현할 것인지?

JWT를 사용하여 로그인 및 로그아웃을 구현하는 과정에서
JWT를 써야만 하는 이유가 없어져 아쉬웠다.
개인적으로 구상 단계에서 이 부분에 대해서
"JWT를 사용하면 여러 옵션들을 고려할 수 있게 되니까 구현할 때 고민해보자"라고 생각하고 미루었다.
그런데 나중에 더 생각해보니 토큰의 만료 시점 이전에 토큰을 폐기하기 위해서는
폐기할 토큰을 저장하든 사용 가능 토큰을 저장하든 저장소가 무조건 필요하다는 것을 생각하게 되었다.
그렇다면 어차피 세션 정보를 저장해야 한다는 점은 변함이 없기 때문에
굳이 JWT를 쓰지 않아도 해결할 수 있는 문제를 JWT를 사용해서 해결하게 되었다.

또한 별도의 인메모리 데이터베이스를 저장소로 사용한다면 데이터베이스에서 지원하는 경우 TTL 설정을 이용하여
DB의 부하를 줄여줄 수 있다고 판단하였지만, 빠르게 해치우고자 하는 기본적인 보일러플레이트 프로젝트에서
한 번도 도입해보지 않은 인메모리 데이터베이스까지 도입하기가 부담스러워 메인 데이터베이스에 토큰을
저장하는 강의에서의 설계를 그대로 가져갔다. 인메모리 데이터베이스를 저장소로 사용한다면 만료 시점을
무결성 있게 저장할 수 있는 JWT의 장점을 살렸을텐데, 시간적 제약으로 인해 아쉬움이 많이 남는다.


### 느낀 점

이전에 결정한 결정들이 나비효과가 되어 미래에 결정을 제약하는 것을 경험하였다.
이 정도면 굉장히 가벼운 정도로 경험했다고 생각한다.
